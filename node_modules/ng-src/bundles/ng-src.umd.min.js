!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define(["exports","@angular/core"],t):t(e["ng-src"]={},e.ng.core)}(this,function(e,t){"use strict";var n=function(){function e(e){this.view=e,this.ngOnLoad=new t.EventEmitter}return Object.defineProperty(e.prototype,"hostImage",{get:function(){return this.view.element.nativeElement},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(){this.fetchImage(this.ngSrc)},e.prototype.fetchImage=function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.responseType="arraybuffer",t.onload=this.onRequestLoaded.bind(this),t.send()},e.prototype.onRequestLoaded=function(e){var t=e.target,n=this.createLocalResource(t);this.setImageSource(n),this.ngOnLoad.emit(t)},e.prototype.createLocalResource=function(e){var t=new Uint8Array(e.response),n=new Blob([t],{type:this.getContentType(e)});return URL.createObjectURL(n)},e.prototype.setImageSource=function(e){this.hostImage.src=e},e.prototype.getContentType=function(e){return e.getResponseHeader("content-type")},e}();n.decorators=[{type:t.Directive,args:[{selector:"[ngSrc]img"}]}],n.ctorParameters=function(){return[{type:t.ViewContainerRef}]},n.propDecorators={ngSrc:[{type:t.Input}],ngOnLoad:[{type:t.Output}]};var r=function(){return function(){}}();r.decorators=[{type:t.NgModule,args:[{declarations:[n],exports:[n]}]}],r.ctorParameters=function(){return[]},e.NgSrcDirective=n,e.NgSrcModule=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ng-src.umd.min.js.map
